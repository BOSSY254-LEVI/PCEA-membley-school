const header = document.getElementById("siteHeader");
const navToggle = document.getElementById("navToggle");
const navMenu = document.getElementById("siteNav");
const revealItems = document.querySelectorAll(".reveal"); function setCurrentYear() { const yearNodes = document.querySelectorAll(".js-year"); const year = new Date().getFullYear(); yearNodes.forEach((node) => { node.textContent = String(year); });
} function handleStickyHeader() { if (!header) { return; } header.classList.toggle("is-scrolled", window.scrollY > 8);
} function closeMenu() { if (!navMenu || !navToggle) { return; } navMenu.classList.remove("is-open"); navToggle.setAttribute("aria-expanded", "false");
} function initMobileNav() { if (!navToggle || !navMenu) { return; } navToggle.addEventListener("click", () => { const isOpen = navMenu.classList.toggle("is-open"); navToggle.setAttribute("aria-expanded", String(isOpen)); }); navMenu.querySelectorAll("a").forEach((link) => { link.addEventListener("click", closeMenu); }); window.addEventListener("resize", () => { if (window.innerWidth > 860) { closeMenu(); } });
} function highlightActivePage() { const currentPage = window.location.pathname.split("/").pop() || "index.html"; const navLinks = document.querySelectorAll(".site-nav a[data-page]"); navLinks.forEach((link) => { const target = link.getAttribute("data-page"); if (target === currentPage) { link.classList.add("is-active"); link.setAttribute("aria-current", "page"); } else { link.classList.remove("is-active"); link.removeAttribute("aria-current"); } });
} function initRevealAnimation() { if (!revealItems.length || !("IntersectionObserver" in window)) { revealItems.forEach((item) => item.classList.add("is-visible")); return; } const observer = new IntersectionObserver( (entries, instance) => { entries.forEach((entry) => { if (entry.isIntersecting) { entry.target.classList.add("is-visible"); instance.unobserve(entry.target); } }); }, { threshold: 0.16 } ); revealItems.forEach((item) => observer.observe(item));
} function isInternalPageLink(anchor) { const href = anchor.getAttribute("href"); if (!href || href.startsWith("#") || anchor.hasAttribute("download")) { return false; } const url = new URL(href, window.location.href); return url.origin === window.location.origin;
} function initPageTransition() { const links = document.querySelectorAll("a[href]"); links.forEach((link) => { if (!isInternalPageLink(link)) { return; } link.addEventListener("click", (event) => { if (event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) { return; } const href = link.getAttribute("href"); if (!href || href.startsWith("#")) { return; } event.preventDefault(); document.body.classList.add("is-leaving"); window.setTimeout(() => { window.location.href = href; }, 140); }); });
} function initNewsFeed() { const feed = document.getElementById("newsFeed"); if (!feed) { return; } const items = [ { date: "February 16, 2026", title: "Junior Secondary Innovation Week", body: "Learners showcased coding prototypes and practical science projects with strong parent participation." }, { date: "February 9, 2026", title: "Parent Partnership Workshop", body: "The school hosted a practical workshop on supporting literacy and numeracy at home." }, { date: "January 28, 2026", title: "County Drama Festival Recognition", body: "Our drama team received top honors for creativity, confidence, and stage discipline." } ]; window.setTimeout(() => { feed.innerHTML = items .map( (item) => `<article class="news-card reveal is-visible"> <span class="meta">${item.date}</span> <h3>${item.title}</h3> <p>${item.body}</p>
</article>` ) .join(""); }, 260);
} function initFaqAccordion() { const triggers = document.querySelectorAll(".faq-trigger"); if (!triggers.length) { return; } triggers.forEach((trigger) => { trigger.addEventListener("click", () => { const parent = trigger.closest(".faq-item"); if (!parent) { return; } parent.classList.toggle("is-open"); const expanded = parent.classList.contains("is-open"); trigger.setAttribute("aria-expanded", String(expanded)); }); });
} function initProspectusForm() { const form = document.getElementById("prospectusForm"); if (!form) { return; } const status = document.getElementById("prospectusStatus"); const submitButton = form.querySelector("button[type='submit']"); form.addEventListener("submit", (event) => { event.preventDefault(); if (!submitButton || !status) { return; } submitButton.classList.add("loading"); status.textContent = "Sending your prospectus request..."; window.setTimeout(() => { submitButton.classList.remove("loading"); status.textContent = "Request received. Our admissions desk will contact you shortly."; form.reset(); }, 900); });
} function initGalleryInteractions() { const gallery = document.getElementById("studentGallery"); if (!gallery) { return; } const filterButtons = document.querySelectorAll("[data-gallery-filter]"); const items = Array.from(gallery.querySelectorAll(".gallery-item")); const loadMoreButton = document.getElementById("galleryLoadMore"); let activeFilter = "all"; let visibleCount = 6; const lightbox = document.getElementById("lightboxOverlay"); const lightboxImage = document.getElementById("lightboxImage"); const lightboxClose = document.getElementById("lightboxClose"); function filteredItems() { return items.filter((item) => { if (activeFilter === "all") { return true; } return item.dataset.category === activeFilter; }); } function renderGallery() { const current = filteredItems(); items.forEach((item) => { item.hidden = true; }); current.slice(0, visibleCount).forEach((item) => { item.hidden = false; }); if (loadMoreButton) { loadMoreButton.hidden = current.length <= visibleCount; } } filterButtons.forEach((button) => { button.addEventListener("click", () => { filterButtons.forEach((btn) => btn.classList.remove("is-active")); button.classList.add("is-active"); activeFilter = button.dataset.galleryFilter || "all"; visibleCount = 6; renderGallery(); }); }); if (loadMoreButton) { loadMoreButton.addEventListener("click", () => { visibleCount += 6; renderGallery(); }); } if (lightbox && lightboxImage && lightboxClose) { gallery.querySelectorAll("img").forEach((img) => { img.addEventListener("click", () => { lightboxImage.src = img.currentSrc || img.src; lightboxImage.alt = img.alt; lightbox.classList.add("is-open"); }); }); lightboxClose.addEventListener("click", () => { lightbox.classList.remove("is-open"); lightboxImage.src = ""; }); lightbox.addEventListener("click", (event) => { if (event.target === lightbox) { lightbox.classList.remove("is-open"); lightboxImage.src = ""; } }); } renderGallery();
} function initTestimonialSlider() { const slider = document.getElementById("testimonialSlider"); if (!slider) { return; } const slides = Array.from(slider.querySelectorAll(".testimonial-slide")); if (slides.length < 2) { return; } let index = 0; window.setInterval(() => { slides[index].classList.remove("is-active"); index = (index + 1) % slides.length; slides[index].classList.add("is-active"); }, 5200);
} function initStaffDirectorySearch() { const input = document.getElementById("directorySearch"); if (!input) { return; } const rows = Array.from(document.querySelectorAll(".staff-row[data-search]")); input.addEventListener("input", () => { const query = input.value.trim().toLowerCase(); rows.forEach((row) => { const haystack = (row.dataset.search || "").toLowerCase(); row.hidden = !haystack.includes(query); }); });
} document.addEventListener("DOMContentLoaded", () => { setCurrentYear(); highlightActivePage(); initMobileNav(); initRevealAnimation(); initPageTransition(); initNewsFeed(); initFaqAccordion(); initProspectusForm(); initGalleryInteractions(); initTestimonialSlider(); initStaffDirectorySearch(); handleStickyHeader(); window.addEventListener("scroll", handleStickyHeader, { passive: true });
});