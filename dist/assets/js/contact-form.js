const contactForm = document.getElementById("contactForm"); function setStatus(message, type) { const status = document.getElementById("formStatus"); if (!status) { return; } status.classList.remove("success", "error"); if (type) { status.classList.add(type); } status.textContent = message;
} function formToMailto(data) { const subject = `[${data.department}] Website Inquiry - ${data.name}`; const bodyLines = [ `Name: ${data.name}`, `Email: ${data.email}`, `Phone: ${data.phone || "Not provided"}`, `Department: ${data.department}`, "", "Message:", data.message ]; const params = new URLSearchParams({ subject, body: bodyLines.join("\n") }); return `mailto:pceasmembleyschool@gmail.com?${params.toString()}`;
} if (contactForm) { const submitButton = contactForm.querySelector("button[type='submit']"); function setLoadingState(isLoading) { if (!submitButton) { return; } submitButton.classList.toggle("loading", isLoading); submitButton.disabled = isLoading; } contactForm.addEventListener("submit", (event) => { event.preventDefault(); const data = { name: contactForm.name.value.trim(), email: contactForm.email.value.trim(), phone: contactForm.phone.value.trim(), department: contactForm.department.value.trim(), message: contactForm.message.value.trim() }; if (!data.name || !data.email || !data.department || !data.message) { setStatus("Please complete all required fields before submitting.", "error"); return; } setLoadingState(true); setStatus("Preparing your message...", "success"); window.setTimeout(() => { window.location.href = formToMailto(data); setStatus("Your email app has been opened. Please send the drafted message.", "success"); contactForm.reset(); setLoadingState(false); }, 700); });
}